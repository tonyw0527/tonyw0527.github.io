---
title: DOM이벤트에서 이벤트 위임까지
date: "2021-05-10T17:08:03.284Z"
description: "DOM 이벤트의 이벤트 흐름에 대해 살펴보고 이벤트 위임을 알아봅시다."
---

## DOM 이벤트

각 DOM 요소들은 특정한 조건을 감지하였을 때, DOM 이벤트를 발생시킵니다. 그리고 이렇게 발생 된 DOM 이벤트를 제어하기 위해 이벤트 핸들러를 각 DOM 요소에 등록하여 사용합니다.

```js
const myButton = document.getElementById("myBtn");

myButton.addEventListener("click", event => {
  console.log(event.currentTarget.id);
});
```

## 이벤트 흐름

표준 DOM 이벤트에서는 3단계의 이벤트 흐름을 정의하였습니다.

1. 캡처링 단계 - 이벤트가 최상위 요소(window 객체)에서 하위 요소로 전파되어 나가며 최하위 요소(실제 타켓 요소)에까지 전달되는 단계 입니다.
2. 타겟 단계 - 이벤트가 실제 타겟 요소에 전달 되는 단계입니다.
3. 버블링 단계 - 이벤트가 캡처링 단계와 반대로 실제 타겟 요소로 부터 최상위 요소(window 객체)까지 전파 되는 단계입니다.

이러한 이벤트 흐름을 아는 것이 이벤트 캡쳐링과 이벤트 버블링을 이해하는 열쇠입니다.

> 캡쳐링과 버블링에서의 전파흐름은 event.stopPropagation() API를 통해 제어할 수 있습니다.
> 특히 버블링의 경우 위 API를 통해 전파를 멈추는 것을 가급적 지양하길 권합니다.

## 이벤트 버블링

이벤트 버블링은 브라우저가 발생된 이벤트를 하위 요소에서 상위 요소로 전달시키는 이벤트 전파 방식을 말합니다.

몇 몇 이벤트를 제외한 대부분의 이벤트는 버블링됩니다.

## 이벤트 캡쳐링

이벤트 캡쳐링은 이벤트 버블링과 반대로 상위 요소(body)에서 하위 요소로 이벤트가 전파되는 방식을 말합니다.

보통 사용할 일이 없습니다.

```js
element.addEventListener(..., {capture: true})
```

> capture 옵션이 true이면 이벤트 핸들러는 캡쳐링 단계에서 동작합니다.
> 반대로 false(default값)이면 버블링 단계에서 동작합니다.

## event.target과 event.currentTarget(=this)

- event.target : 실제 이벤트가 시작된 '타겟' 요소를 참조하며 버블링이 진행되어도 변하지 않습니다.
- evnet.currentTarget(=this) : 현재 실행 중인 이벤트 핸들러가 할당된 요소를 참조합니다.

## 이벤트 위임

이벤트 캡쳐링과 버블링을 응용한 이벤트 핸들링 패턴입니다.

공통 조상을 갖는 하위 요소들에게 일일이 이벤트 핸들러를 등록하는 것이 아니라 공통 조상 한 곳에만 이벤트 핸들러를 등록하여 각 하위 요소들로부터 버블링 되어 전파되는 이벤트들을 공통 조상 요소에서 일괄적으로 처리하게끔 하는 것 입니다.

이를 통해 코드 중복을 방지하고 자원을 절약할 수 있습니다.

공통 조상에 할당한 이벤트 핸들러에서 event.target을 참조하면 실제로 이벤트가 발생한 요소를 알 수 있습니다. 이를 통해 이벤트 핸들링을 하는 것이죠.
